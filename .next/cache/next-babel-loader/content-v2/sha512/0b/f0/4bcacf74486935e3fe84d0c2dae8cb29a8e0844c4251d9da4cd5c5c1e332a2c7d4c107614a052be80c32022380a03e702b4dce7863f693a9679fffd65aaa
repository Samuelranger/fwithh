{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\fiverr\\\\fiverr\\\\brought\\\\shoponix\\\\dashboard-source-code\\\\components\\\\Product\\\\AddProductToCart.js\";\nimport React from 'react';\nimport { Input } from \"semantic-ui-react\";\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport cookie from 'js-cookie';\nimport baseUrl from '../../utils/baseUrl';\nimport catchErrors from '../../utils/catchErrors';\n\nconst AddProductToCart = ({\n  user,\n  productId\n}) => {\n  const [quantity, setQuantity] = React.useState(1);\n  const [loading, setLoading] = React.useState(false);\n  const [success, setSuccess] = React.useState(false);\n  const router = useRouter();\n  React.useEffect(() => {\n    let timeout;\n\n    if (success) {\n      timeout = setTimeout(() => {\n        setSuccess(false);\n      }, 3000);\n    }\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [success]);\n\n  const handleAddProductToCart = async () => {\n    try {\n      setLoading(true);\n      const url = `${baseUrl}/api/cart`;\n      const payload = {\n        quantity,\n        productId\n      };\n      const token = cookie.get('token');\n      const headers = {\n        headers: {\n          Authorization: token\n        }\n      };\n      await axios.put(url, payload, headers);\n      setSuccess(true);\n    } catch (error) {\n      catchErrors(error, window.alert);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Input, {\n      type: \"number\",\n      min: \"1\",\n      max: \"10\",\n      placeholder: \"Quantity\",\n      value: quantity,\n      onChange: e => setQuantity(Number(e.target.value)),\n      action: user && success ? {\n        color: 'blue',\n        content: 'Item Added!',\n        icon: 'plus cart',\n        disabled: true\n      } : user ? {\n        color: 'violet',\n        content: 'Add to Cart',\n        icon: 'plus cart',\n        loading: loading,\n        disbaled: `${loading}`,\n        onClick: handleAddProductToCart\n      } : {\n        color: 'green',\n        content: 'Login to purchase',\n        icon: 'sign-in',\n        onClick: () => router.push('/auth/login')\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n\nexport default AddProductToCart;","map":{"version":3,"sources":["D:/fiverr/fiverr/brought/shoponix/dashboard-source-code/components/Product/AddProductToCart.js"],"names":["React","Input","useRouter","axios","cookie","baseUrl","catchErrors","AddProductToCart","user","productId","quantity","setQuantity","useState","loading","setLoading","success","setSuccess","router","useEffect","timeout","setTimeout","clearTimeout","handleAddProductToCart","url","payload","token","get","headers","Authorization","put","error","window","alert","e","Number","target","value","color","content","icon","disabled","disbaled","onClick","push"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Input } from \"semantic-ui-react\";\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport cookie from 'js-cookie';\nimport baseUrl from '../../utils/baseUrl';\nimport catchErrors from '../../utils/catchErrors';\n\nconst AddProductToCart = ({ user, productId }) => {\n    const [quantity, setQuantity] = React.useState(1);\n    const [loading, setLoading] = React.useState(false);\n    const [success, setSuccess] = React.useState(false);\n    const router = useRouter();\n\n    React.useEffect(() => {\n        let timeout;\n        if (success){\n            timeout = setTimeout(() => {\n                setSuccess(false)\n            }, 3000);\n        }\n        return () => {\n            clearTimeout(timeout);\n        }\n    }, [success])\n\n    const handleAddProductToCart = async () => {\n        try {\n            setLoading(true);\n            const url = `${baseUrl}/api/cart`;\n            const payload = { quantity, productId };\n            const token = cookie.get('token');\n            const headers = { headers: {Authorization: token} };\n            await axios.put(url, payload, headers);\n            setSuccess(true);\n        } catch (error) {\n            catchErrors(error, window.alert);\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <Input \n                type=\"number\"\n                min=\"1\"\n                max=\"10\"\n                placeholder=\"Quantity\"\n                value={quantity}\n                onChange={e => setQuantity(Number(e.target.value))}\n                action={\n                    user && success ? {\n                        color: 'blue',\n                        content: 'Item Added!',\n                        icon: 'plus cart',\n                        disabled: true\n                    } : \n                    user ? {\n                    color: 'violet',\n                    content: 'Add to Cart',\n                    icon: 'plus cart',\n                    loading: loading,\n                    disbaled: `${loading}`,\n                    onClick: handleAddProductToCart\n                } : {\n                    color: 'green',\n                    content: 'Login to purchase',\n                    icon: 'sign-in',\n                    onClick: () => router.push('/auth/login')\n                }}\n            />\n        </React.Fragment>\n    );\n}\n\nexport default AddProductToCart;\n"]},"metadata":{},"sourceType":"module"}